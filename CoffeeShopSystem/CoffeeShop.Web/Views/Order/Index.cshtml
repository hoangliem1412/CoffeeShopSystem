@model IEnumerable<CoffeeShop.Model.ModelEntity.Order>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section js{
    <script>

    $(document).ready(function () {
        $(".btnDetail").on('click', function () {
            var id = $(this).data('id');
            var url2 = '/Order/GetListOrderProductByOrderID/';

            $.ajax({
                url: '@Url.Action("GetListOrderProductByOrderID", "Order")',
                type: 'post',
                data:{'id':id},
                dataType: 'json',
                timeout: 30 * 1000,

            })
                    .done(function (data) {
                       
                        $.each(data, function (idx, item) {
                            var html =
                                '<tr>' +
                                    '<td>' + item.name + '</td>' +
                                     '<td>' + item.price + '</td>' +
                                      '<td>' + item.quantity + '</td>' +
                                    '<td>' + item.money + '</td>' +
                                '</tr>';
                            $('#Detailbody').append(html);
                        });
                        $('#modalDetail').modal('show');
                    })
                    .fail(function (jqXHR, status, error) {
                        console.log(jqXHR);
                        alert('fail');
                    });

        });
    });
    </script>
}

<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_title">
            <h2>Table design <small>Custom design</small></h2>
            <ul class="nav navbar-right panel_toolbox">
                <li style="float:right">
                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>
            </ul>
            <div class="clearfix"></div>
        </div>

        <div class="x_content" style="display: block;">
            <div class="row">
                <div class="col-sm-4">
                    <label>Hiện</label>
                    <select>
                        <option value="value">5</option>
                        <option value="value">10</option>
                        <option value="value">50</option>
                        <option value="value">100</option>
                    </select>
                    <label>Trên</label>
                </div>
                <div class="col-sm-8">
                    <form>
                        <label class="radio-inline">
                            <input type="radio" name="optradio">Hiển thị tất cả
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="optradio" checked="checked">Đang quản lý
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="optradio">Đã xóa
                        </label>
                    </form>
                </div>

            </div>
            <div class="panel panel-default panel-table" style="margin-top: 20px">
                <div class="panel-heading clearfix">
                    <div class="col-sm-8">
                        <a href="javascript:;" id="btnAddNew" title="Thêm mới" class="panel-title"><i class="glyphicon glyphicon-plus"></i></a>
                    </div>

                    <div class="col-sm-4">
                        <input type="text" class="form-control" placeholder="Từ khóa...">
                    </div>
                </div>

                <div class="panel-body clearfix">
                    <table class="table table-striped table-responsive jambo_table bulk_action" id="listTable">
                        <thead>
                            <tr>
                                <th>Mã hóa đơn</th>
                                <th>Tên bàn</th>
                                <th>Tên khách hàng</th>
                                <th>Khuyến mãi</th>
                                <th>Ngày tạo</th>
                                <th>Thành tiền</th>
                                <th>Tình trạng</th>
                                <th>&nbsp;</th>
                                <th>&nbsp;</th>
                                <th>&nbsp;</th>
                            </tr>
                        </thead>

                        <tbody id="bodyOrder">
                           @foreach (var item in Model)
            {
                <tr>
                    <td>@item.ID</td>
                    <td>@item.Table.Name</td>
                    <td>@item.User.Name</td>
                    <td>a@*@item.Promotion.Name*@</td>
                    <td>@item.SetDate</td>
                    <td>@item.TotalMoney</td>
                    @if (item.Status == true)
                    {
                        <td>Đã thanh toán</td>
                    }
                    else
                    {
                        <td>Chưa thanh toán</td>
                    }
                    <td><button class="btnDetail" data-id="@item.ID"><i class="glyphicon glyphicon-list"></i></button></td>
                    <td><button id="btnEdit"><i class="glyphicon glyphicon-edit"></i></button></td>
                    <td><button id="btnDelete"><i class="glyphicon glyphicon-remove"></i></button></td>
                </tr>
            }
                        </tbody>
                    </table>
                </div>
                <div class="panel-footer">
                    <div class="row">
                        <div class="col col-xs-4">
                            Page 1 of 5
                        </div>
                        <div class="col col-xs-8">
                            <ul class="pagination hidden-xs pull-right">
                                <li><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                            </ul>
                            <ul class="pagination visible-xs pull-right">
                                <li><a href="#">«</a></li>
                                <li><a href="#">»</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*create popup*@
<div class="modal fade" id="modalDetail">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" class="close" data-dismiss="modal">&times;</a>
                <h4 id="ModalTitle">TIÊU ĐỀ</h4>
            </div>
            <div class="modal-body">
                <div>
                    <table class="table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Tên sản phẩm</th>
                                <th>Giá</th>
                                <th>Số lượng</th>
                                <th>Thành tiền</th>
                            </tr>
                        </thead>
                        <tbody id="Detailbody"></tbody>
                    </table>
                </div>
                
            </div>
        </div>
    </div>
</div>
@*/create popup*@

